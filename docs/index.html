<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JuanBlog — Ensayos sin domesticar</title>
    <meta name="description" content="Ensayos sobre filosofía, entrenamiento y cultura de masa. Iniciación intelectual con vislumbres de trascendencia.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500&family=EB+Garamond:ital,wght@0,400;0,500;0,600;1,400;1,500&family=Instrument+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --ink: #1a1714;
            --ink-soft: #2c2822;
            --parchment: #f5f0e8;
            --parchment-deep: #ebe4d8;
            --parchment-light: #faf7f2;
            --accent: #8b2500;
            --accent-hover: #a83000;
            --accent-soft: #a0522d;
            --muted: #7a7168;
            --muted-light: #9e958a;
            --divider: #d4c9b8;
            --divider-light: #e5ddd0;
            --card-bg: #faf8f4;
            --card-hover: #ffffff;
            --shadow-sm: 0 1px 3px rgba(26,23,20,0.06);
            --shadow-md: 0 4px 16px rgba(26,23,20,0.08);
            --shadow-lg: 0 12px 40px rgba(26,23,20,0.12);
            --radius: 2px;
            --ease: cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }

        body {
            font-family: 'EB Garamond', Georgia, serif;
            background: var(--parchment);
            color: var(--ink);
            line-height: 1.6;
            font-size: 17px;
            -webkit-font-smoothing: antialiased;
        }

        ::selection {
            background: rgba(139, 37, 0, 0.15);
            color: var(--ink);
        }

        /* ========== NAVBAR ========== */
        .navbar {
            position: fixed;
            top: 0; left: 0; right: 0;
            z-index: 100;
            background: rgba(245, 240, 232, 0.92);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-bottom: 1px solid var(--divider-light);
            transition: transform 0.4s var(--ease), box-shadow 0.4s var(--ease);
        }

        .navbar.scrolled {
            box-shadow: var(--shadow-sm);
        }

        .nav-inner {
            max-width: 1100px;
            margin: 0 auto;
            padding: 16px 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-brand {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.4em;
            font-weight: 600;
            color: var(--ink);
            text-decoration: none;
            letter-spacing: -0.01em;
            transition: color 0.3s var(--ease);
        }

        .nav-brand:hover { color: var(--accent); }

        .nav-links {
            display: flex;
            gap: 32px;
            list-style: none;
        }

        .nav-links a {
            font-family: 'Instrument Sans', sans-serif;
            font-size: 0.82em;
            font-weight: 500;
            color: var(--muted);
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            transition: color 0.3s var(--ease);
        }

        .nav-links a:hover { color: var(--ink); }

        /* ========== HERO ========== */
        .hero {
            padding: 160px 32px 80px;
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .hero-rule {
            width: 40px;
            height: 1px;
            background: var(--accent);
            margin: 0 auto 24px;
        }

        .hero-label {
            font-family: 'Instrument Sans', sans-serif;
            font-size: 0.72em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.25em;
            color: var(--accent);
            margin-bottom: 20px;
        }

        .hero h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(2.8em, 6vw, 4.2em);
            font-weight: 300;
            line-height: 1.08;
            color: var(--ink);
            margin-bottom: 24px;
            letter-spacing: -0.02em;
        }

        .hero h1 em {
            font-weight: 500;
            font-style: italic;
        }

        .hero-subtitle {
            font-size: 1.15em;
            color: var(--muted);
            max-width: 480px;
            margin: 0 auto;
            line-height: 1.7;
            font-style: italic;
        }

        /* ========== FILTER BAR ========== */
        .filter-bar {
            max-width: 1100px;
            margin: 0 auto 20px;
            padding: 0 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .filter-tags {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .filter-tag {
            font-family: 'Instrument Sans', sans-serif;
            font-size: 0.76em;
            font-weight: 500;
            padding: 6px 16px;
            border: 1px solid var(--divider);
            border-radius: 100px;
            background: transparent;
            color: var(--muted);
            cursor: pointer;
            transition: all 0.25s var(--ease);
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }

        .filter-tag:hover {
            border-color: var(--ink);
            color: var(--ink);
        }

        .filter-tag.active {
            background: var(--ink);
            border-color: var(--ink);
            color: var(--parchment);
        }

        .filter-count {
            font-family: 'Instrument Sans', sans-serif;
            font-size: 0.8em;
            color: var(--muted-light);
        }

        .filter-count span {
            color: var(--ink);
            font-weight: 600;
        }

        /* ========== DIVIDER ========== */
        .section-rule {
            max-width: 1100px;
            margin: 0 auto 48px;
            padding: 0 32px;
        }

        .section-rule hr {
            border: none;
            border-top: 1px solid var(--divider);
        }

        /* ========== FEATURED CARD ========== */
        .featured-section {
            max-width: 1100px;
            margin: 0 auto 64px;
            padding: 0 32px;
        }

        .featured-card {
            display: grid;
            grid-template-columns: 1fr 1fr;
            background: var(--card-bg);
            border: 1px solid var(--divider-light);
            text-decoration: none;
            color: inherit;
            overflow: hidden;
            transition: all 0.5s var(--ease);
        }

        .featured-card:hover {
            box-shadow: var(--shadow-lg);
            border-color: var(--divider);
            transform: translateY(-2px);
        }

        .featured-left {
            padding: 48px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .featured-label {
            font-family: 'Instrument Sans', sans-serif;
            font-size: 0.68em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            color: var(--accent);
            margin-bottom: 16px;
        }

        .featured-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2em;
            font-weight: 600;
            line-height: 1.15;
            margin-bottom: 10px;
            color: var(--ink);
        }

        .featured-subtitle {
            font-style: italic;
            color: var(--muted);
            font-size: 1.05em;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .featured-excerpt {
            color: var(--muted);
            font-size: 0.95em;
            line-height: 1.7;
            margin-bottom: 24px;
        }

        .featured-meta {
            font-family: 'Instrument Sans', sans-serif;
            font-size: 0.75em;
            color: var(--muted-light);
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .featured-meta .dot {
            width: 3px; height: 3px;
            background: var(--divider);
            border-radius: 50%;
        }

        .featured-right {
            background: var(--ink);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            min-height: 360px;
        }

        .featured-right .deco-text {
            font-family: 'Cormorant Garamond', serif;
            font-size: 12em;
            font-weight: 700;
            color: rgba(255,255,255,0.04);
            position: absolute;
            line-height: 1;
            user-select: none;
        }

        .featured-right .essay-number {
            font-family: 'Cormorant Garamond', serif;
            font-size: 6em;
            font-weight: 300;
            color: rgba(255,255,255,0.12);
            letter-spacing: -0.03em;
        }

        .read-arrow {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-family: 'Instrument Sans', sans-serif;
            font-size: 0.78em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--accent);
            transition: gap 0.3s var(--ease);
        }

        .featured-card:hover .read-arrow { gap: 14px; }

        /* ========== ARTICLES GRID ========== */
        .articles-section {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 32px 80px;
        }

        .grid-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 32px;
            border-bottom: 1px solid var(--divider);
            padding-bottom: 12px;
        }

        .grid-header h2 {
            font-family: 'Instrument Sans', sans-serif;
            font-size: 0.72em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            color: var(--muted);
        }

        .articles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 24px;
        }

        /* ========== ARTICLE CARD ========== */
        .article-card {
            display: flex;
            flex-direction: column;
            background: var(--card-bg);
            border: 1px solid var(--divider-light);
            padding: 32px;
            text-decoration: none;
            color: inherit;
            transition: all 0.4s var(--ease);
            position: relative;
        }

        .article-card::after {
            content: '';
            position: absolute;
            bottom: 0; left: 32px; right: 32px;
            height: 2px;
            background: var(--accent);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.4s var(--ease);
        }

        .article-card:hover {
            background: var(--card-hover);
            box-shadow: var(--shadow-md);
            transform: translateY(-3px);
        }

        .article-card:hover::after {
            transform: scaleX(1);
        }

        .card-number {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.4em;
            font-weight: 300;
            color: var(--divider);
            line-height: 1;
            margin-bottom: 16px;
            transition: color 0.4s var(--ease);
        }

        .article-card:hover .card-number {
            color: var(--accent);
        }

        .card-tags {
            display: flex;
            gap: 8px;
            margin-bottom: 14px;
            flex-wrap: wrap;
        }

        .card-tag {
            font-family: 'Instrument Sans', sans-serif;
            font-size: 0.65em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--muted-light);
            padding: 3px 0;
        }

        .card-tag + .card-tag::before {
            content: '·';
            margin-right: 8px;
        }

        .card-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.45em;
            font-weight: 600;
            line-height: 1.2;
            margin-bottom: 8px;
            color: var(--ink);
        }

        .card-subtitle {
            font-style: italic;
            color: var(--muted);
            font-size: 0.95em;
            margin-bottom: 16px;
            line-height: 1.5;
        }

        .card-excerpt {
            font-size: 0.92em;
            color: var(--muted);
            line-height: 1.65;
            flex: 1;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 16px;
            border-top: 1px solid var(--divider-light);
        }

        .card-date {
            font-family: 'Instrument Sans', sans-serif;
            font-size: 0.75em;
            color: var(--muted-light);
        }

        .card-read {
            font-family: 'Instrument Sans', sans-serif;
            font-size: 0.75em;
            color: var(--muted-light);
        }

        .card-status {
            font-family: 'Instrument Sans', sans-serif;
            font-size: 0.65em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            padding: 3px 10px;
            border-radius: 2px;
        }

        .card-status.draft {
            background: rgba(139, 37, 0, 0.08);
            color: var(--accent);
        }

        .card-status.approved {
            background: rgba(45, 80, 22, 0.08);
            color: #2d5016;
        }

        /* ========== NO RESULTS ========== */
        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            padding: 80px 32px;
        }

        .no-results p {
            font-style: italic;
            color: var(--muted);
            font-size: 1.1em;
        }

        /* ========== FOOTER ========== */
        .footer {
            border-top: 1px solid var(--divider);
            padding: 40px 32px;
            text-align: center;
        }

        .footer-inner {
            max-width: 1100px;
            margin: 0 auto;
        }

        .footer-brand {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.2em;
            font-weight: 600;
            color: var(--ink);
            margin-bottom: 8px;
        }

        .footer-text {
            font-family: 'Instrument Sans', sans-serif;
            font-size: 0.78em;
            color: var(--muted-light);
            letter-spacing: 0.03em;
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 768px) {
            .nav-inner { padding: 14px 20px; }
            .nav-links { display: none; }
            .hero { padding: 130px 20px 60px; }
            .hero h1 { font-size: 2.4em; }
            .filter-bar { padding: 0 20px; }
            .featured-section { padding: 0 20px; }
            .featured-card { grid-template-columns: 1fr; }
            .featured-right { min-height: 180px; }
            .featured-left { padding: 32px; }
            .articles-section { padding: 0 20px 60px; }
            .articles-grid { grid-template-columns: 1fr; }
            .section-rule { padding: 0 20px; }
        }

        /* ========== ANIMATIONS ========== */
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hero { animation: fadeUp 0.8s var(--ease) both; }
        .filter-bar { animation: fadeUp 0.8s 0.1s var(--ease) both; }
        .featured-section { animation: fadeUp 0.8s 0.2s var(--ease) both; }
        .articles-section { animation: fadeUp 0.8s 0.3s var(--ease) both; }
    </style>
</head>
<body>

    <!-- NAVBAR -->
    <nav class="navbar" id="navbar">
        <div class="nav-inner">
            <a href="index.html" class="nav-brand">JuanBlog</a>
            <ul class="nav-links">
                <li><a href="index.html">Ensayos</a></li>
                <li><a href="https://github.com/Arkus0/JuanBlog" target="_blank">Repositorio</a></li>
            </ul>
        </div>
    </nav>

    <!-- HERO -->
    <section class="hero">
        <div class="hero-rule"></div>
        <p class="hero-label">Ensayos sin domesticar</p>
        <h1>Pensamiento que <em>incomoda</em></h1>
        <p class="hero-subtitle">Filosofía, entrenamiento, cultura de masa. Iniciación intelectual con vislumbres de trascendencia.</p>
    </section>

    <!-- FILTER -->
    <div class="filter-bar">
        <div class="filter-tags" id="filterTags"></div>
        <div class="filter-count" id="filterCount"></div>
    </div>

    <!-- DIVIDER -->
    <div class="section-rule"><hr></div>

    <!-- FEATURED -->
    <div class="featured-section" id="featuredSection"></div>

    <!-- ARTICLES GRID -->
    <section class="articles-section">
        <div class="grid-header">
            <h2>Todos los ensayos</h2>
        </div>
        <div class="articles-grid" id="articlesGrid"></div>
    </section>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-inner">
            <div class="footer-brand">JuanBlog</div>
            <p class="footer-text">Escrito con gravedad moral y café solo · 2026</p>
        </div>
    </footer>

    <script>
        let articles = [];
        let tags = [];
        let activeTag = null;

        document.addEventListener('DOMContentLoaded', loadData);

        // Navbar scroll effect
        let lastScroll = 0;
        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            navbar.classList.toggle('scrolled', window.scrollY > 40);
        });

        async function loadData() {
            try {
                const res = await fetch('data/articles.json');
                const data = await res.json();
                articles = data.articles;
                tags = data.tags;
                renderFilters();
                renderAll();
            } catch (e) {
                document.getElementById('articlesGrid').innerHTML =
                    '<div class="no-results"><p>No se pudieron cargar los ensayos.</p></div>';
            }
        }

        function renderFilters() {
            const container = document.getElementById('filterTags');
            const allBtn = document.createElement('button');
            allBtn.className = 'filter-tag active';
            allBtn.textContent = 'Todos';
            allBtn.onclick = () => selectTag(null);
            container.appendChild(allBtn);

            const usedTags = new Set(articles.flatMap(a => a.tags));
            tags.filter(t => usedTags.has(t.id)).forEach(tag => {
                const btn = document.createElement('button');
                btn.className = 'filter-tag';
                btn.textContent = tag.name;
                btn.onclick = () => selectTag(tag.id);
                container.appendChild(btn);
            });
        }

        function selectTag(tagId) {
            activeTag = tagId;
            document.querySelectorAll('.filter-tag').forEach((btn, i) => {
                if (i === 0 && !tagId) btn.classList.add('active');
                else if (btn.textContent === tags.find(t => t.id === tagId)?.name) btn.classList.add('active');
                else btn.classList.remove('active');
            });
            renderAll();
        }

        function renderAll() {
            let filtered = activeTag
                ? articles.filter(a => a.tags.includes(activeTag))
                : [...articles];

            filtered.sort((a, b) => new Date(b.date) - new Date(a.date));

            // Count
            document.getElementById('filterCount').innerHTML =
                `<span>${filtered.length}</span> ensayo${filtered.length !== 1 ? 's' : ''}`;

            // Featured (first featured article)
            const featured = filtered.find(a => a.featured);
            const featuredSection = document.getElementById('featuredSection');

            if (featured && !activeTag) {
                const idx = articles.indexOf(featured);
                featuredSection.innerHTML = `
                    <a href="${featured.file}" class="featured-card">
                        <div class="featured-left">
                            <div class="featured-label">Ensayo destacado</div>
                            <h2 class="featured-title">${featured.title}</h2>
                            <p class="featured-subtitle">${featured.subtitle}</p>
                            <p class="featured-excerpt">${featured.excerpt}</p>
                            <div class="featured-meta">
                                <span>${formatDate(featured.date)}</span>
                                <span class="dot"></span>
                                <span>${featured.readTime} min de lectura</span>
                            </div>
                            <div style="margin-top: 24px;">
                                <span class="read-arrow">Leer ensayo →</span>
                            </div>
                        </div>
                        <div class="featured-right">
                            <span class="deco-text">J</span>
                            <span class="essay-number">${String(articles.length - idx).padStart(2, '0')}</span>
                        </div>
                    </a>`;
                filtered = filtered.filter(a => a !== featured);
            } else {
                featuredSection.innerHTML = '';
            }

            // Grid
            const grid = document.getElementById('articlesGrid');
            if (filtered.length === 0) {
                grid.innerHTML = '<div class="no-results"><p>No hay ensayos en esta categoría.</p></div>';
                return;
            }

            grid.innerHTML = filtered.map((article, i) => {
                const num = String(articles.length - articles.indexOf(article)).padStart(2, '0');
                const tagNames = article.tags
                    .map(t => tags.find(tag => tag.id === t)?.name || t)
                    .slice(0, 3);
                const status = article.status === 'approved' ? 'approved' : 'draft';
                const statusLabel = status === 'approved' ? 'Publicado' : 'Borrador';

                return `
                    <a href="${article.file}" class="article-card" style="animation: fadeUp 0.5s ${0.1 + i * 0.06}s var(--ease) both;">
                        <span class="card-number">${num}</span>
                        <div class="card-tags">
                            ${tagNames.map(t => `<span class="card-tag">${t}</span>`).join('')}
                        </div>
                        <h3 class="card-title">${article.title}</h3>
                        <p class="card-subtitle">${article.subtitle}</p>
                        <p class="card-excerpt">${article.excerpt}</p>
                        <div class="card-footer">
                            <span class="card-date">${formatDate(article.date)}</span>
                            <span class="card-read">${article.readTime} min</span>
                            <span class="card-status ${status}">${statusLabel}</span>
                        </div>
                    </a>`;
            }).join('');
        }

        function formatDate(d) {
            return new Date(d).toLocaleDateString('es-ES', {
                day: 'numeric', month: 'long', year: 'numeric'
            });
        }
    </script>

</body>
</html>
